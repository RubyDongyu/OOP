## 类图

类图用来描述模型的静态结构，如类的内部结构以及他们与其他类的关系。

类之间的关系有如下几类

* 泛化/继承关系\(Generalization\)
* 实现关系\(Realization\)
* 关联\(Association\)
* 依赖\(Dependency\)
* 聚合关系\(Aggregation\)
* 组合\(Composition\)

### 继承/泛化关系\(Generalization\)

继承关系为 is-a的关系；两个对象之间如果可以用 is-a 来表示，就是继承关系。比如猫是动物，老虎是动物。

继承的目的是为了抽离出同类型对象的公共属性和行为，实现复用。比如猫和老虎都有眼睛，嘴巴并且都能移动，通过抽离出共有的属性和行为然后通过继承进行归类。

在UML中，继承关系用一条带空心箭头的直线表示，箭头指向被继承的类，如：

![](/assets/generalization3.png)

### 实现关系\(Realization\)

实现是对抽象出的接口具体化的过程。比如我们程序中定义的任务Task都有一个启动的开关让其执行，而不同的任务执行的内部方式又是迥异的，这样通过抽象定义出接口，让子类来实现具体的接口。

在UML中实现通过一条带空心箭头的虚线表示，如：

![](/assets/realization2.png)

### 关联关系\(Association\)

关联是一种描述不同类之间结构的静态关系，通常与运行状态无关，他一般用来定义对象之间的静态的天然的结构。关联的对象表明了解对方的部分或全部细节，一般是长期性的，而且双方的关系一般是平等的、关联可以是单向、双向的。

在代码层面，为被关联类B以类属性的形式出现在关联类A中，也可能是关联类A引用了一个类型为被关联类B的全局变量，也就是关联类A了解关联类B的细节或暴露的结构，能对其进行操作或改变内部状态。

关联关系是用一条直线表示的，也可以添加箭头表明单向关联。如：

![](/assets/association3.png)

### 依赖关系\(Dependency\)

依赖关系是一种运行时的动态关系，他描述一个对象在特定的运行期间会用到另一个对象。比如在使用HttpContext进行请求时，会用到Response来作为返回值。与关联关系不同的是，它是一种临时性的关系，通常在运行期间产生，并且随着运行时的变化，依赖关系也可能发生变化。依赖也是有方向的，在设计中应该保持单向依赖，避免双向依赖。

在代码中依赖表现为类构造方法以及函数的参数，临时知道对方，并使用对方的方法和属性。

依赖关系用带箭头的虚线表示，箭头的指向为调用关系，如：

![](/assets/dependency.png)

### 聚合\(Aggregation\)

聚合是将不相关联的对象组合成一个大对象的方式，表示整体和部分的关系。例如一个公司由很多员工组成，员工和公司以及员工之间相互独立，离开相互都能独立存在，比如公司破产消失了，员工能照样存在，有员工离职了，公司也照样存在。

聚合用一条带空心菱形的箭头表示，菱形指向整体，箭头指向部分，如：

## ![](/assets/aggregation.png)

### 组合\(Composition\)

组合也是构建大对象的方法，描述整体和部分的关系。与聚合不同的是组合关系是一种强依赖的聚合关系，如果整体不存在了，部分也不存在了。比如一个公司由很多部门组成，公司不存在了，那么部门也就不存在了。

组合是用一条带实心菱形的箭头表示，菱形指向整体，箭头指向部分，如：

![](/assets/composition.png)

